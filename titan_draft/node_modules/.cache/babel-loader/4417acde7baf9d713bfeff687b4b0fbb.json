{"ast":null,"code":"import _regeneratorRuntime from\"/Users/brocroberts/Documents/Code/titanesports/titan_draft/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/brocroberts/Documents/Code/titanesports/titan_draft/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";var openSocket=require(\"socket.io-client\");var config=require(\"../../server/config\");var path=config.production?\"https://titan-esports.org:7001\":\"http://localhost:7001\";var socket=openSocket(path);var params={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(m,key,value){params[key]=value;});socket.emit(\"join\",params);var blockLobbyMusic=false;var lobbyMusic=new Audio(require(\"./audio/lobby_music.mp3\"));lobbyMusic.volume=0;lobbyMusic.loop=true;var music=new Audio(require(\"./audio/music.mp3\"));music.volume=0;music.loop=true;var duckLobbyMusic=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var decrement;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:decrement=0.005;if(!(lobbyMusic.volume>0)){_context.next=8;break;}if(lobbyMusic.volume>decrement){lobbyMusic.volume-=decrement;}else{lobbyMusic.volume=0;}_context.next=5;return new Promise(function(resolve,reject){setTimeout(function(){return resolve();},250);});case 5:_context.next=7;return duckLobbyMusic();case 7:return _context.abrupt(\"return\",_context.sent);case 8:blockLobbyMusic=true;case 9:case\"end\":return _context.stop();}}},_callee);}));return function duckLobbyMusic(){return _ref.apply(this,arguments);};}();module.exports={setVolume:function setVolume(e){if(!blockLobbyMusic)lobbyMusic.volume=e;music.volume=e;},playLobbyMusic:function playLobbyMusic(){return lobbyMusic.play();},emit_blue_ready:function emit_blue_ready(){return socket.emit(\"blue_ready\");},emit_red_ready:function emit_red_ready(){return socket.emit(\"red_ready\");},emit_update:function emit_update(data){return socket.emit(\"update\",data);},update:function update(cb){socket.on(\"update\",function(data){var state={blueTime:data.draft.blueTime,redTime:data.draft.redTime,active:data.active,glowColor:data.draft.finished?\"transparent\":data.draft.team>0?\"red\":\"blue\",data:data.draft.data,blue_ready:data.draft.blue_ready,red_ready:data.draft.red_ready,running:data.draft.running,finished:data.draft.finished,turn:data.draft.turn,team:data.draft.team,t1_name:data.draft.t1_name,t1_logo:data.draft.t1_logo,t2_name:data.draft.t2_name,t2_logo:data.draft.t2_logo,modal:false};if(data.blue_captain){state.blue_captain=true;}else if(data.red_captain){state.red_captain=true;}cb(state);if(data.champion&&data.pick){var audio=new Audio(data.champion[data.action===\"pick\"?\"pickAudio\":\"banAudio\"]);audio.volume=0.1;audio.play();}});socket.on(\"emit_countdown\",function(){music.play();duckLobbyMusic();cb({countdown:true});});socket.on(\"play-music\",function(){music.play();duckLobbyMusic();});socket.on(\"invalid code\",function(){cb({error:\"Lobby not found\"});});}};","map":{"version":3,"sources":["/Users/brocroberts/Documents/Code/titanesports/titan_draft/src/emitters.js"],"names":["openSocket","require","config","path","production","socket","params","window","location","href","replace","m","key","value","emit","blockLobbyMusic","lobbyMusic","Audio","volume","loop","music","duckLobbyMusic","decrement","Promise","resolve","reject","setTimeout","module","exports","setVolume","e","playLobbyMusic","play","emit_blue_ready","emit_red_ready","emit_update","data","update","cb","on","state","blueTime","draft","redTime","active","glowColor","finished","team","blue_ready","red_ready","running","turn","t1_name","t1_logo","t2_name","t2_logo","modal","blue_captain","red_captain","champion","pick","audio","action","countdown","error"],"mappings":"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","sourcesContent":["const openSocket = require(\"socket.io-client\");\nconst config = require(\"../../server/config\");\nconst path = config.production\n  ? \"https://titan-esports.org:7001\"\n  : \"http://localhost:7001\";\nconst socket = openSocket(path);\nlet params = {};\nwindow.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, (m, key, value) => {\n  params[key] = value;\n});\n\nsocket.emit(\"join\", params);\n\nlet blockLobbyMusic = false;\n\nlet lobbyMusic = new Audio(require(\"./audio/lobby_music.mp3\"));\nlobbyMusic.volume = 0;\nlobbyMusic.loop = true;\n\nlet music = new Audio(require(\"./audio/music.mp3\"));\nmusic.volume = 0;\nmusic.loop = true;\n\nconst duckLobbyMusic = async () => {\n  const decrement = 0.005;\n  if (lobbyMusic.volume > 0) {\n    if (lobbyMusic.volume > decrement) {\n      lobbyMusic.volume -= decrement;\n    } else {\n      lobbyMusic.volume = 0;\n    }\n    await new Promise((resolve, reject) => {\n      setTimeout(() => resolve(), 250);\n    });\n    return await duckLobbyMusic();\n  }\n  blockLobbyMusic = true;\n};\n\nmodule.exports = {\n  setVolume: e => {\n    if (!blockLobbyMusic) lobbyMusic.volume = e;\n    music.volume = e;\n  },\n  playLobbyMusic: () => lobbyMusic.play(),\n  emit_blue_ready: () => socket.emit(\"blue_ready\"),\n  emit_red_ready: () => socket.emit(\"red_ready\"),\n  emit_update: data => socket.emit(\"update\", data),\n  update: cb => {\n    socket.on(\"update\", data => {\n      let state = {\n        blueTime: data.draft.blueTime,\n        redTime: data.draft.redTime,\n        active: data.active,\n        glowColor: data.draft.finished\n          ? \"transparent\"\n          : data.draft.team > 0\n          ? \"red\"\n          : \"blue\",\n        data: data.draft.data,\n        blue_ready: data.draft.blue_ready,\n        red_ready: data.draft.red_ready,\n        running: data.draft.running,\n        finished: data.draft.finished,\n        turn: data.draft.turn,\n        team: data.draft.team,\n        t1_name: data.draft.t1_name,\n        t1_logo: data.draft.t1_logo,\n        t2_name: data.draft.t2_name,\n        t2_logo: data.draft.t2_logo,\n        modal: false\n      };\n      if (data.blue_captain) {\n        state.blue_captain = true;\n      } else if (data.red_captain) {\n        state.red_captain = true;\n      }\n      cb(state);\n      if (data.champion && data.pick) {\n        let audio = new Audio(\n          data.champion[data.action === \"pick\" ? \"pickAudio\" : \"banAudio\"]\n        );\n        audio.volume = 0.1;\n        audio.play();\n      }\n    });\n    socket.on(\"emit_countdown\", () => {\n      music.play();\n      duckLobbyMusic();\n      cb({ countdown: true });\n    });\n    socket.on(\"play-music\", () => {\n      music.play();\n      duckLobbyMusic();\n    });\n    socket.on(\"invalid code\", () => {\n      cb({\n        error: \"Lobby not found\"\n      });\n    });\n  }\n};\n"]},"metadata":{},"sourceType":"module"}